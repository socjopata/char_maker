<% if @shopkeeper.result.resource.class.name == "Weapon" %>
    $('#<%= @shopkeeper.result.class.name.tableize -%> tr:last').after('<tr id="<%= @shopkeeper.result.id -%>"><td class="alantar_td"><p class="normal"><%= @shopkeeper.result.resource.name -%></p></td><td class="alantar_td"><p class="normal" id="<%= @shopkeeper.result.class.name.tableize -%>_<%= @shopkeeper.result.id -%>_speed"><%= item_upgrade_link(@shopkeeper.character, @shopkeeper.result.resource, @shopkeeper.result, "speed") -%></p></td><td class="alantar_td"><p class="normal" id="<%= @shopkeeper.result.class.name.tableize -%>_<%= @shopkeeper.result.id -%>_damage"><%= item_upgrade_link(@shopkeeper.character, @shopkeeper.result.resource, @shopkeeper.result, "damage") -%></p></td><td class="alantar_td"><p class="normal" id="#<%= @shopkeeper.result.class.name.tableize -%>_<%= @shopkeeper.result.id -%>_attack_bonus"><%= item_upgrade_link(@shopkeeper.character, @shopkeeper.result.resource, @shopkeeper.result, "attack_bonus") %></p></td><td class="alantar_td"><p class="normal" id="<%= @shopkeeper.result.class.name.tableize -%>_<%= @shopkeeper.result.id -%>_defense_bonus"><%= item_upgrade_link(@shopkeeper.character, @shopkeeper.result.resource, @shopkeeper.result, "defense_bonus") -%></p></td><td class="alantar_td"><p class="normal"><%= link_to image_tag('delete.png'), remove_item_from_inventory_character_wizard_path(:char_id => @shopkeeper.character.id, :item_type => @shopkeeper.result.resource.class.name, :inventory_item => @shopkeeper.result.resource.id, :delete_id => @shopkeeper.result.id), :remote => true -%></p></td></tr>');
<% elsif @shopkeeper.result.resource.class.name == "RangedWeapon" %>
    $('#<%= @shopkeeper.result.class.name.tableize -%> tr:last').after('<tr id="<%= @shopkeeper.result.id -%>"><td class="alantar_td"><p class="normal"><%= @shopkeeper.result.resource.name -%></p></td><td class="alantar_td"><p class="normal" id="<%= @shopkeeper.result.class.name.tableize -%>_<%= @shopkeeper.result.id %>_speed\"><%= ranged_weapon_speed_upgrade_link(@shopkeeper.character, @shopkeeper.result.resource, @shopkeeper.result, "speed") -%></p></td><td class="alantar_td"><p class="normal" id="<%= @shopkeeper.result.class.name.tableize -%>_<%= @shopkeeper.result.id -%>_damage"><%= item_upgrade_link(@shopkeeper.character, @shopkeeper.result.resource, @shopkeeper.result, "damage") -%></p></td><td class="alantar_td"><p class="normal" id="<%= @shopkeeper.result.class.name.tableize -%>_<%= @shopkeeper.result.id -%>_attack_bonus"><%= item_upgrade_link(@shopkeeper.character, @shopkeeper.result.resource, @shopkeeper.result, "attack_bonus") -%></p></td><td class="alantar_td"><p class="normal" id="<%= @shopkeeper.result.class.name.tableize -%>_<%= @shopkeeper.result.id -%>_range"><%= item_upgrade_link(@shopkeeper.character, @shopkeeper.result.resource, @shopkeeper.result, "range")%></p></td><td class="alantar_td"><p class="normal"><%= link_to image_tag('delete.png'), remove_item_from_inventory_character_wizard_path(:char_id => @shopkeeper.character.id, :item_type => @shopkeeper.result.resource.class.name, :inventory_item => @shopkeeper.result.resource.id, :delete_id => @shopkeeper.result.id), :remote => true -%></p></td></tr>');
<% elsif @shopkeeper.result.resource.class.name == "Armor" %>
    $('#<%= @shopkeeper.result.class.name.tableize -%> tr:last').after('<tr id="<%= @shopkeeper.result.id -%>"><td class="alantar_td"><p class="normal"><%= @shopkeeper.result.resource.name -%></p></td><td class="alantar_td"><p class="normal" id="set_armor_<%= @shopkeeper.result.id -%>"><%= set_armor_as_main(@shopkeeper.character, @shopkeeper.result) -%></p></td><td class="alantar_td"><p class="normal" id="<%= @shopkeeper.result.class.name.tableize -%>_<%= @shopkeeper.result.id -%>_dexterity_nerf"><%= item_upgrade_link(@shopkeeper.character, @shopkeeper.result.resource, @shopkeeper.result, "dexterity_nerf") -%></p></td><td class="alantar_td"><p class="normal" id="<%= @shopkeeper.result.class.name.tableize -%>_<%= @shopkeeper.result.id -%>_dexterity_cap\"><%= item_upgrade_link(@shopkeeper.character, @shopkeeper.result.resource, @shopkeeper.result, "dexterity_cap") -%></p></td><td class="alantar_td"><p class="normal" id="<%= @shopkeeper.result.class.name.tableize -%>_<%= @shopkeeper.result.id -%>_defense_bonus"><%= item_upgrade_link(@shopkeeper.character, @shopkeeper.result.resource, @shopkeeper.result, "defense_bonus") -%></p></td><td class="alantar_td"><p class="normal"><%= link_to image_tag('delete.png'), remove_item_from_inventory_character_wizard_path(:char_id => @shopkeeper.character.id, :item_type => @shopkeeper.result.resource.class.name, :inventory_item => @shopkeeper.result.resource.id, :delete_id => @shopkeeper.result.id), :remote => true -%></p></td></tr>');
<% elsif @shopkeeper.result.resource.class.name == "Shield" %>
    $('#<%= @shopkeeper.result.class.name.tableize -%> tr:last').after('<tr id="<%= @shopkeeper.result.id -%>"><td class="alantar_td"><p class="normal"><%= @shopkeeper.result.resource.name -%></p></td><td class="alantar_td"><p class="normal" id="set_shield_<%= @shopkeeper.result.id -%>"><%= set_shield_as_main(@shopkeeper.character, @shopkeeper.result) -%></p></td><td class="alantar_td"><p class="normal" id="<%= @shopkeeper.result.class.name.tableize -%>_<%= @shopkeeper.result.id -%>_dexterity_nerf"><%= item_upgrade_link(@shopkeeper.character, @shopkeeper.result.resource, @shopkeeper.result, "dexterity_nerf") -%></p></td><td class="alantar_td"><p class="normal" id="<%= @shopkeeper.result.class.name.tableize -%>_<%= @shopkeeper.result.id -%>_dexterity_cap"><%= item_upgrade_link(@shopkeeper.character, @shopkeeper.result.resource, @shopkeeper.result, "dexterity_cap") -%></p></td><td class="alantar_td"><p class="normal" id="<%= @shopkeeper.result.class.name.tableize -%>_<%= @shopkeeper.result.id -%>_defense_bonus"><%= item_upgrade_link(@shopkeeper.character, @shopkeeper.result.resource, @shopkeeper.result, "defense_bonus") -%></p></td><td class="alantar_td"><p class="normal"><%= link_to image_tag('delete.png'), remove_item_from_inventory_character_wizard_path(:char_id => @shopkeeper.character.id, :item_type => @shopkeeper.result.resource.class.name, :inventory_item => @shopkeeper.result.resource.id, :delete_id => @shopkeeper.result.id), :remote => true -%></p></td></tr>');
<% end %>

$('#purse').text('<%= humanize_purse_content(@character.session[:coins_left]) -%>');
$('#purse').effect('highlight', {color: 'red'}, 1500);

